<meta charset='utf8'>
<h1>js正则之 replace， 参数2为 function</h1>

<pre>
F12:
</pre>

<script>
//tools
function print(s){console.log(s)}

var elem='<div class=book>some text</div><br/><p/><div/>';
//把不正确的单标签修正为双标签，比如：
/*
	<div/>修正为<div></div>
	<p/>修正为<p></p>
*/
elem = elem.replace(/(<(\w+)[^>]*?)\/>/g, function(all, front, tag){
	print( this )
	return tag.match(/^(abbr|br|col|img|input|link|meta|param|hr|area|embed)$/i) ?
		all :
		front + "></" + tag + ">";
});

print(elem);
// <div class=book>some text</div> <br/> <p></p> <div></div>
</script>